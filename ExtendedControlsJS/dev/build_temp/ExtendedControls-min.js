function sortData(t,e,a){return t.sort(function(t,n){return a?t[e]<n[e]?1:-1:n[e]<t[e]?1:-1})}!function(t){t.fn.drags=function(e){if(""===(e=t.extend({handle:"",cursor:"move"},e)).handle)var a=this;else a=this.find(e.handle);return a.css("cursor",e.cursor).on("mousedown",function(a){if(""===e.handle)var n=t(this).addClass("draggable");else n=t(this).addClass("active-handle").parent().addClass("draggable");var i=n.css("z-index"),l=n.outerHeight(),o=n.outerWidth(),s=n.offset().top+l-a.pageY,d=n.offset().left+o-a.pageX;n.css("z-index",9999).parents().on("mousemove",function(e){t(".draggable").offset({top:e.pageY+s-l,left:e.pageX+d-o}).on("mouseup",function(){t(this).removeClass("draggable").css("z-index",i)})}),a.preventDefault()})}}(jQuery),function(t){t.fn.ASHeader=function(e){return t(this).PageHeader(e),this}}(jQuery),function(t){t.fn.ASSocialMedia=function(e){return t(this).SocialMediaIcons(e),this}}(jQuery),function(t){t.fn.boolDD=function(e){var a=this,n=t.extend({koBoundObject:null,trueText:"Yes",falseText:"No",OnValueChanged:null},e);null!=n.koBoundObject&&(a.value=n.koBoundObject());var i="";i+="<select class='boolDDSelect'>",i+="<option class='boolDDYes' value='true'>"+n.trueText+"</option>",i+="<option class='boolDDNo' value='false'>"+n.falseText+"</option>",i+="</select>",this.html(i);var l=t(this).find(".boolDDSelect")[0];return l.value=null==this.value||this.value,t(l).on("change",function(){a.val(l.value),a.value=l.value,null!=n.koBoundObject&&n.koBoundObject(l.value),null!=n.OnValueChanged&&n.OnValueChanged(a.value)}),null!=n.koBoundObject&&n.koBoundObject.subscribe(function(){l.value=n.koBoundObject()}),this}}(jQuery),function(t){t.fn.busyBox=function(e){if("hide"===e)return this.hide(),this;if("show"===e)return this.show(),this;var a=t.extend({text:"Busy Box - Text",title:"BUSY BOX - Title",show:!0,align:"centre",boxstyle:"default",inverse:!1,spinner:"fa-spinner"},e),n="<div class='busy-box'>";n+="<div class='row busy-title'>",n+="<p>"+a.title+"</p>",n+="</div>",n+="<div class='row busy-icon'>",n+="<i class='fa fa-2x fa-spin "+a.spinner+"'></i> ",n+="</div>",n+="<div class='row  busy-text'>",n+="<p>"+a.text+"</p>",n+="</div>",n+="</div>",this.html(n);var i=t(this).find(".busy-box"),l=t(this).find(".busy-text"),o=t(this).find(".busy-title");t(this).find(".busy-icon");switch(a.boxstyle){case"pleasewait":t(o).text("Please Wait"),t(i).addClass("please-wait")}return a.inverse&&t(i).addClass("inverse"),this.css({display:a.show?"block":"none"}),Object.defineProperty(this,"text",{get:function(){return t(l).text()},set:function(e){t(l).text(e)}}),Object.defineProperty(this,"title",{get:function(){return t(o).text()},set:function(e){t(o).text(e)}}),this}}(jQuery),function(t){t.fn.busySplash=function(e){var a=t.extend({disableInput:!1,text:"Fetching data",title:"Please Wait"},e);t(this).append("<div class='modal busy-splash-modal'></div>");var n=t(this).find(".busy-splash-modal")[0];return this.busyBox=t(n).busyBox({show:!1,text:a.text,title:a.title}),this.show=function(){a.disableInput?t(n).modal({backdrop:"static",keyboard:!1}):t(n).modal("show")},this.hide=function(){t(n).modal("hide")},this}}(jQuery),$(document).ready(function(){$(".ec-captcha").each(function(t,e){$(e).Captcha({})})}),function(t){t.fn.Captcha=function(e){var a=t.extend({actionOnContinue:null,actionOnClick:null,confirmIcon:"fa fa-arrow-right fa-2x",continueIcon:"fa fa-check fa-2x"},e),n="";n+="<div class='captcha-container container no'>",n+="<div class='row'>",n+="<div class='captcha-button btn-confirm'>",n+="<div class='btn-text'>I am not a robot</div>",n+="<div class='captcha-icon $icon$'></div>".replace("$icon$",a.confirmIcon),n+="</div>",n+="<div class='captcha-button btn-continue'>",n+="<div class='btn-text'>Click here to continue</div>",n+="<div class='captcha-icon $icon$'></div>".replace("$icon$",a.continueIcon),n+="</div>",n+="</div>",n+="</div>",this.append(n);var i=t(this).find(".btn-continue"),l=t(this).find(".btn-confirm");return t(i).addClass("disabled"),t(l).on("click",function(){t(l).addClass("disabled"),t(i).removeClass("disabled"),null!=a.actionOnClick&&a.actionOnClick()}),t(i).on("click",function(){null!=a.actionOnContinue&&a.actionOnContinue()}),this}}(jQuery),function(t){t.fn.CaptchaImage=function(e){var a=this;a.sessionID="",a.addClass("captcha-image-container");var n=t.extend({captchaProviderURL:null,submitHandler:null},e),i=n.captchaProviderURL+"GetImage",l=n.captchaProviderURL+"GetCaptchaResult";a.append("<div class='captcha-image'><div class='row'><img class='captcha-img' /></div><div class='row'><h5>Please enter the the numbers shown above.</h5></div><div class='row incorrect-input'>The last entry did not match, please try again.</div><div class='row'><div class='col-sm-9'><h6>If you can't read the numbers click here to fetch a different set.</h6></div><div class='col-sm-2'><div class='btn btn-default btn-refresh'><icon class='fa fa-refresh fa-2x'></icon></div></div></div><div class='row'><input class='captcha-input' type='text'/></div><div class='row'><div class='btn btn-default btn-submit'>Submit</div></div></div>");var o=t(a).find(".captcha-input"),s=t(a).find(".btn-submit"),d=t(a).find(".captcha-img"),r=t(a).find(".incorrect-input"),c=t(a).find(".btn-refresh");return t(c).on("click",function(){a.getImageData(),t(o).val(""),t(o).focus()}),t(s).on("click",function(){a.checkInput()}),a.checkInput=function(){var e=t(o).val(),n={};n.inputtext=e,n.sessionID=a.sessionID,t.ajax({url:l,type:"get",data:n,success:function(t){console.log(t),a.inputCheckCallbback(t)},error:function(t){console.warn("Error check captcha value")}})},a.inputCheckCallbback=function(e){"True"===e?null!=n.submitHandler&&n.submitHandler():(t(r).addClass("shown"),a.getImageData(),t(o).val(""),t(o).focus())},a.getImageData=function(){t.ajax({url:i,type:"get",success:function(e){var n=JSON.parse(e);t(d).attr("src","data:image/png;base64,"+n.imageData),a.sessionID=n.SessionID},error:function(t){console.log("Error getting image data")}})},a.getImageData(),t(o).focus(),a}}(jQuery),function(t){t.fn.ExtendedClipboard=function(e){var a=this;t.extend({},e);return a.copyToClipboard=function(t){var e=a[0];e.textContent=t,e.select();try{return document.execCommand("copy")}catch(t){return console.warn("Copy to clipboard failed.",t),!1}},a}}(jQuery),$(document).ready(function(){$(".panel-collapse").each(function(){$(this).collapsablePanel({})})}),function(t){t.fn.collapsablePanel=function(e){var a=this;t(a).wrap("<div class='cp-container'></div>");var n=t(a).attr("paneltitle"),i=t(a).attr("showhandler"),l=t(a).attr("hidehandler"),o=t.extend({paneltitle:null,collapsed:!0,showhandler:"",hidehandler:""},e);null!=i&&(o.showhandler=i),null!=l&&(o.hidehandler=l),a.paneltitle=n||o.paneltitle||"New Panel",a.tooltipText=o.collapsed?"Click to expand":"Click to hide";var s="<h2 class='cp-header' title='$toolTipText$' data-toggle='tooltip'>$paneltitle$</h2>".replace("$paneltitle$",a.paneltitle).replace("$toolTipText$",a.tooltipText);a.before(s);var d=t(a).parent(".cp-container").find(".cp-header");t(a).prevObject;return t(d).on("click",function(){t(a).toggle(300),o.collapsed=!o.collapsed,t(d).attr("title",o.collapsed?"Click to expand":"Click to hide"),o.collapsed?(t(a).removeClass("expanded"),t(a).addClass("collapsed")):(t(a).removeClass("collapsed"),t(a).addClass("expanded")),o.collapsed&&""!=o.hidehandler&&o.hidehandler,o.collapsed||""==o.showhandler||o.showhandler}),a.collapse=function(e){e?t(a.hide()):t(a).show()},o.collapsed&&t(a).hide(),a}}(jQuery);class TableUpdateDataParams{constructor(t,e,a,n){this.changedRows=t,this.newRows=e,this.deletedRows=a,this.allRows=n}}class EventParams{constructor(t,e){this.eventName=t,this.handler=e}}var textboxes,koVM,ECClipboard,glowers;function AddIEDatepicker(){window.navigator.userAgent.toLowerCase().indexOf("trident")>0&&$("input[type=date]").datepicker()}function InitArrays(){textboxes=[]}function GenerateTextBoxes(){$(".ec-textbox").each(function(){var t=$(this).text(),e=$(this).attr("labeltext"),a=$(this).attr("nolabel"),n=$(this).attr("id"),i=$(this).attr("textBinding"),l=$(this).attr("labelBinding"),o=$(this).attr("koViewModel"),s="ecTextBox"+textboxes.length,d=$(this).textbox({tbText:t,labelText:e,noLabel:a,id:null!=n?n:s,textkoBinding:ParseBindingString(i,o),labelkoBinding:ParseBindingString(l,o)});textboxes.push(d)})}function GetBindingContext(t){var e=$(t).attr("data-bind");if(null!=e){var a=e.split(":"),n=(a[0].trim(),a[1].trim());return ko.contextFor(t).$data[n]}return null}function ParseBindingString(t,e){var a,n;return null==t?null:(null==e?(a=t.split(".")[0],n=t.split(".")[1]):(a=e,n=t),window[a][n])}function AddClipboard(){ECClipboard=$(".extended-clipboard").ExtendedClipboard()}function InitGlowers(t){glowers=$(document).find(".glower"),window.setInterval(function(){$.each(glowers,function(t,e){$(e).hasClass("glowon")&&$(e).toggleClass("glow")})},t)}function GetPolyProps(t){for(var e=t.split(","),a=999999,n=999999,i=0,l=0,o=0;o<e.length;o++){var s=parseFloat(e[o]),d=parseFloat(e[o+1]);s>i&&(i=s),d>l&&(l=d),s<a&&(a=s),d<n&&(n=d),o++}return new PolyProps(a,n,i-a,l-n)}function ResizePolyPoints(t,e){}function PolyProps(t,e,a,n){this.x=t,this.y=e,this.width=a,this.height=n}!function(t){t.fn.DataTable=function(e){var a=this,n="",i=[],l=!1,o=t.extend({tableData:null,sortEnabled:!0,enableEdit:!0,deleteEnabled:!0,addEnabled:!0,saveEnabled:!0,showFilterInput:!0,matchCase:!1,usePagination:!0,autoHidePagination:!1,pageSize:5,defaultSaveHandler:null,hiddenFields:""},e);function s(){var t=[];a.tableData.forEach(function(e,a){e.dt__hasChanged=!1,e.dt__isNew=!1,e.dt__index=a,t.push(e)}),a.tableData=t,a.isKOBinding&&(a.handleKOSubscription=!1,a.koBoundTableData(a.tableData),a.handleKOSubscription=!0)}return a.koBoundTableData=null,a.isKOBinding=!1,a.handleKOSubscription=!0,a.showHiddenValues=!1,a.assignedAttributes=t(this).closest(".ec-data-table")[0].attributes,a.columns=[],a.columnCount=0,a.sortBy="",a.sortDesc=!1,a.originalData=null,a.filterData="",a.sortedData=[],a.sortEnabled=o.sortEnabled,a.usePagination=o.usePagination,a.pageSize=o.pageSize,a.currentPage=0,a.pageCount=0,a.selectedDataIndex=0,a.selectedRow=null,a.isEditing=!1,a.eventHandlers={},a.saveHandlers=[],a.rowSelectedHandlers=[],a.Events={NewEventHandler:function(t,e){null!=a.eventHandlers[t]||(a.eventHandlers[t]=[]),a.eventHandlers[t].push(e)}},a.event=function(t,e){null!=a.eventHandlers[t]&&a.eventHandlers[t].length>0&&a.eventHandlers[t].forEach(function(t,a){null!=e?t(e):t()})},a.Data={SetTableData:function(t){return a.tableData=t,a.updateTable(),""},SortTableData:function(t,e){return a.sortBy=t,a.sortDesc=e,a.updateTable(),""},SaveData:function(){var t=[],e=[],n=[];a.tableData.forEach(function(i,l){var o={};a.columns.forEach(function(t,e){-1==t.indexOf("dt__")&&(o[t]=i[t])}),i.dt__isNew&&t.push(o),i.dt__hasChanged&&e.push(o),n.push(o)});var l=new TableUpdateDataParams(e,t,i,n);a.event("save",l),s()}},"function"==typeof o.tableData?null!=o.tableData.__ko_proto__?(a.isKOBinding=!0,a.koBoundTableData=o.tableData,null!=a.koBoundTableData&&null!=a.koBoundTableData&&(a.tableData=a.koBoundTableData(),s()),a.koBoundTableData.subscribe(function(){a.handleKOSubscription&&(a.tableData=a.koBoundTableData(),s(),a.updateTable())})):a.tableData=o.tableData():a.tableData=o.tableData,a.headerClickEventHandler=function(){if(a.sortEnabled){var e=t(a[0]).find("th");t(e).off("click").on("click",function(){t(e).removeClass("sorted");var n=t(a).find(".ec-data-table-inner");a.sortBy==t(this).text()?a.sortDesc=!a.sortDesc:a.sortDesc=!1,a.sortBy=t(this).text(),t(n).html(""),t(n).html(a.generateTable()),a.headerClickEventHandler(),a.addRowAndDataHandlers()})}},a.formatControl=function(){var e=t(a).find(".ec-filter-input-container")[0],n=t(a).find(".ec-data-table-inner")[0],i=t(a).find(".ec-datatable-pagination-container"),l=t(a).find(".ec-datatable-controlpanel"),s=t(a).parent()[0],d=s.clientWidth,r=s.scrollLeft,c=n.clientWidth<d?n.clientWidth:d;if(a.pageCount<=1&&o.autoHidePagination?t(i).addClass("hide"):t(i).removeClass("hide"),t(e).width(c),a.usePagination){var u=t(i)[0].clientWidth;if(c<u){var p=(u-c)/2+r;t(n).css("margin-left",p),t(e).width(c+p)}else{var f=(c-u)/2+r;t(i).css("margin-left",f)}}var h=t(n).find("span");h.length>0&&t(h).each(function(e,a){var n=e.clientWidth,i=e.clientHeight,l=t(this).closest("td").find("input");t(l).width(n),t(l).height(i)}),o.enableEdit||t(a).find(".ec-btn-datatable-edit").addClass("hide"),o.deleteEnabled||t(a).find(".ec-btn-datatable-remove").addClass("hide"),o.addEnabled||t(a).find(".ec-btn-datatable-add").addClass("hide"),o.saveEnabled||t(a).find(".ec-btn-datatable-save").addClass("hide"),o.enableEdit||o.deleteEnabled||o.addEnabled||o.saveEnabled||t(a).find(".ec-datatable-controlpanel").addClass("hide"),l.width(c-2),t(l).css("margin-left",r),a.width(c),a.addRowAndDataHandlers()},a.addRowAndDataHandlers=function(){var e=t(a).find(".ec-data-table-inner")[0],n=t(e).find("tr"),i=t(n).find("td");t(i).off("click").on("click",function(){l=!0,t(n).removeClass("selected");var e=t(this).closest("tr");e.addClass("selected"),a.selectedRow=e,a.selectedDataIndex=t(this).closest("tr").attr("dataindex"),a.event("rowselected")})},a.generateTable=function(){for(var t in null!=a.tableData&&null!=a.tableData?a.originalData=a.tableData:(a.tableData=[],a.originalData=a.tableData),a.columns=[],n="",n+="<thead>",n+="<tr>",a.originalData[0])"__ko_mapping__"!==t&&a.columns.push(t);if((""==a.sortBy||null==a.sortBy&&a.sortEnabled)&&(a.sortBy=a.columns[0]),a.sortEnabled&&""!=a.sortBy?(a.tableData=a.originalData,a.sortedData=a.tableData.sort(function(t,e){return a.sortDesc?t[a.sortBy]<e[a.sortBy]?1:-1:e[a.sortBy]<t[a.sortBy]?1:-1})):a.sortedData=a.originalData,a.columnCount=a.columns.length,null!=a.filterData&&""!=a.filterData&&(a.sortedData=a.sortedData.filter(function(t){var e=!1;return a.columns.forEach(function(n,i){if(-1==n.indexOf("dt__")){var l=t[n],s=null!=l?l.toString():"",d=a.filterData;o.matchCase||(s=s.toLowerCase(l),d=d.toLowerCase(d)),s.indexOf(d)>-1&&(e=!0)}}),e}),a.formatControl()),a.pageCount=Math.ceil(a.sortedData.length/a.pageSize),a.usePagination){var e=a.currentPage*a.pageSize,i=e+a.pageSize;a.sortedData=a.sortedData.filter(function(t){var n=a.sortedData.indexOf(t);return n>=e&&n<i})}return a.columns.forEach(function(t,e){var i="";t==a.sortBy&&(i="class='sorted ",i+=a.sortDesc?" desc":" asc",i+="'"),(-1==t.toString().indexOf("dt__")||a.showHiddenValues)&&-1==o.hiddenFields.indexOf(t)&&(n+="<th ",n+=i,n+=" >",n+=t,a.sortEnabled&&(n+="<icon class='fa ",a.sortBy==t&&(n+=a.sortDesc?"fa-arrow-up":"fa-arrow-down"),n+="'></icon>"),n+="</th>")}),n+="</tr>",n+="</thead>",n+="<tbody>",a.sortedData.forEach(function(t,e){var i=t.dt__index;n+="<tr class'ec-datatable-row' dataindex=$index$>".replace("$index$",i),a.columns.forEach(function(e,i){if((-1==e.toString().indexOf("dt__")||a.showHiddenValues)&&-1==o.hiddenFields.indexOf(e)){var l="function"===typeof t[e]?t[e]():t[e];n+="<td class='ec-datatable-data'>",n+="<span class='ec-data-value'>$value$</span>".replace("$value$",l),n+="<input class='ec-data-input' ",n+="value='$value$'".replace("$value$",l),n+=" col=$col$".replace("$col$",e),n+=" />",n+="</td>"}})}),n+="</tbody>"},a.UpdateFilteredValues=function(t){a.filterData=t,a.updateTable()},a.updateTable=function(){!function(){var e=t(a).find(".ec-data-table-inner");t(e).html(""),t(e).html(a.generateTable());var n=t(a).find(".current-page");t(n).text(a.currentPage+1);var i=t(a).find(".last-page");t(i).text(a.pageCount),a.headerClickEventHandler(),a.formatControl()}()},a.setDefaults=function(){a.sortBy=a.columns[0]},a.addFilterControl=function(){var e=t(a).find(".ec-data-table-inner");o.showFilterInput&&t(e).before("<div class='ec-filter-input-container'><label>Filter</label><input class='ec-filter-input' type='text' /></div>");var n=t(a).find(".ec-filter-input")[0];o.showFilterInput&&t(n).on("keyup",function(){a.UpdateFilteredValues(t(this).val())})},a.addPaginationControl=function(){if(a.usePagination){var e="";e+="<div class='ec-datatable-pagination-container'>",e+="<div class='btn btn-default btn-pagination pg-first'><icon class='glyphicon glyphicon-fast-backward'></div>",e+="<div class='btn btn-default btn-pagination pg-prev'><icon class='glyphicon glyphicon-backward'></div>",e+="<div class='current-page page-number'>$currentPage$</div>".replace("$currentPage$",a.currentPage+1),e+="<div class='pg-text page-number'>of</div>",e+="<div class='last-page page-number'>$pageCount$</div>".replace("$pageCount$",a.pageCount),e+="<div class='btn btn-default btn-pagination pg-next'><icon class='glyphicon glyphicon-forward'></icon></div>",e+="<div class='btn btn-default btn-pagination pg-last'><icon class='glyphicon glyphicon-fast-forward'></div>",e+="</div>",a.append(e)}var n=a.find(".ec-datatable-pagination-container");t(n).find(".btn-pagination").off("click").on("click",function(){var e=a.currentPage+1<a.pageCount,n=a.currentPage>0;t(this).hasClass("pg-first")&&(a.currentPage=0),t(this).hasClass("pg-prev")&&n&&a.currentPage--,t(this).hasClass("pg-next")&&e&&a.currentPage++,t(this).hasClass("pg-last")&&(a.currentPage=a.pageCount-1),a.updateTable()})},a.addControlPanel=function(){var e=t(a).find(".ec-data-table-inner");t(e).before("<div class='ec-datatable-controlpanel'><div class='ec-right-buttons'><div class='btn ec-btn-datatable-remove'><i class='fa fa-trash-o'></i></div><div class='btn ec-btn-datatable-add'>+</div></div><div class='ec-left-buttons'><div class='btn ec-btn-datatable-save'>Save</div><div class='btn ec-btn-datatable-edit'>Edit</div></div></div>");var n=t(a).find(".ec-datatable-controlpanel");function o(e,n){t(e).find("input").off("keyup").on("keyup",function(e){var i=t(this).attr("col");a.tableData[n][i]=t(this).val()})}t(n).find(".ec-btn-datatable-add").on("click",function(){var n={};a.columns.forEach(function(t,e){n[t]=""}),n.dt__isNew=!0,n.dt__index=a.tableData.length,a.tableData.unshift(n),a.updateTable();var i=t(e).find("tr")[1];t(i).addClass("new-row"),o(i,0),a.formatControl(),t(i).find("input")[0].focus()}),t(n).find(".ec-btn-datatable-remove").on("click",function(){var t,e;l&&(i.push((t=a.tableData[a.selectedDataIndex],e={},a.columns.forEach(function(a,n){-1==a.indexOf("dt__")&&(e[a]=t[a])}),e)),a.tableData.splice(a.selectedDataIndex,1),s(),a.updateTable())}),t(n).find(".ec-btn-datatable-save").on("click",function(){a.Data.SaveData()}),t(n).find(".ec-btn-datatable-edit").on("click",function(){l&&(t(a.selectedRow).addClass("edit-row"),o(a.selectedRow,a.selectedDataIndex),a.tableData[a.selectedDataIndex].dt__hasChanged=!0,t(a.selectedRow).find("input")[0].focus())})},function(){if(null!=a.tableData&&null!=a.tableData){var e=t(a).find(".ec-data-table-inner");a.html("<table class='ec-data-table-inner'></table>"),t(e).append(a.generateTable()),a.addFilterControl(),a.addPaginationControl(),a.addControlPanel(),a.headerClickEventHandler()}}(),function(){t(document).ready(function(){a.formatControl()}),t(window).off("resize").on("resize",function(){a.formatControl()});var e=t(a).parent()[0];t(e).off("scroll").on("scroll",function(){a.formatControl()})}(),a}}(jQuery),$(document).ready(function(){InitArrays(),GenerateTextBoxes(),AddClipboard()}),$(document).ready(function(){InitGlowers(1e3)}),function(t){t.fn.formattedCurrency=function(e){var a=t.extend({Formatter:function(t){return new Intl.NumberFormat("en-uk",{style:"currency",currency:"GBP",minimumFractionDigits:2}).format(t)}},e);t(this).formattedInput(a)},t.fn.formattedDate=function(e){var a=t.extend({Formatter:function(t){return new moment(t).format("DD/MM/YYYY")}},e);t(this).formattedInput(a)},t.fn.formattedInput=function(e){var a=this;a.inputText=null,a.inputData=null,a.addClass("formatted-input-data"),a.wrap("<div class='formatted-input-container'></div>");var n=t.extend({Formatter:null},e);return"<div class='formatted-input-text'></div>",a.after("<div class='formatted-input-text'></div>"),a.inputText=a.closest(".formatted-input-container").find(".formatted-input-text"),a.inputData=a.closest(".formatted-input-container").find(".formatted-input-data"),t(a.inputText).on("click",function(){t(this).hide(),t(a.inputData).show(),t(a.inputData).focus()}),t(a.inputData).on("blur",function(){t(this).hide(),t(a.inputText).show(),t(a.inputText).text(n.Formatter(a.inputData.val()))}),a}}(jQuery),function(t){t.fn.formattedSelect=function(e){var a,n,i,l,o=this,s=t(o).find("option"),d=document.createElement("div"),r=!1,c=o[0].id;o.selectedOptionText="",o.selectedOptionValue=null;var u,p,f=t.extend({koBoundObject:null,listValues:!1,additionalHTML:"",isBoolean:!1},e);function h(t,e){var a="",n=t,i=e;return""!=f.additionalHTML&&(n=f.additionalHTML.replace("$text$",t).replace("$value$",e)),a+="<span class='selection-item-text'>"+n+"</span>",f.listValues&&(a+="<span class='selection-item-value'>"+i+"</span>"),a}function v(t){return s.filter(function(e,a){return a.value==t})}function b(e){r=e,e?(t(a).addClass("expanded"),t(a).removeClass("collapsed"),t(l).addClass("expanded")):(t(a).removeClass("expanded"),t(a).addClass("collapsed"),t(l).removeClass("expanded"))}return u="",null!=f.koBoundObject?(o.selectedOptionValue=f.koBoundObject(),null!==o.selectedOptionValue&&""!==o.selectedOptionValue?(u=v(o.selectedOptionValue.toString())[0].text,o.selectedOptionText=h(u,o.selectedOptionValue)):(u=s[0].text,o.selectedOptionValue=s[0].value,o.selectedOptionText=h(u,o.selectedOptionValue))):(u=s[0].text,o.selectedOptionValue=s[0].value,o.selectedOptionText=h(u,o.selectedOptionValue)),p="<div class='formatted-select' id='"+c+"'>",p+="<div class='selected-item collapsed'>"+o.selectedOptionText+"</div>",p+="<div class='selection-items'>",p+="<ul>",t.each(s,function(t,e){p+="<li>",p+="<div class='selection-item'",p+=" value="+e.value,p+=">",p+=h(e.text,e.value),p+="</div>",p+="</li>"}),p+="</ul>",p+="</div>",p+="</div>",d.innerHTML=p.trim(),a=t(d).find(".selected-item"),n=t(d).find(".selection-items"),i=t(d).find(".selection-item"),l=t(d).find(".formatted-select"),t(a).on("click",function(){t(n).toggle(),b(!r)}),t(i).on("click",function(){var e=t(this).attr("value"),i=v(e)[0].text;t(a).html(h(i,e)),o.value=e,t(n).hide(),b(!1);var l=o.value;f.isBoolean&&(l="true"==o.value,"default"==o.value&&(l=null)),null!=f.koBoundObject&&f.koBoundObject(l)}),null!=f.koBoundObject&&f.koBoundObject.subscribe(function(){var e=f.koBoundObject(),n=v(e=null==e?"default":e.toString())[0].text;t(a).html(h(n,e)),o.value=e}),t(n).hide(),this.replaceWith(d),o}}(jQuery),$(document).ready(function(){$(".ec-header").PageHeader(),$(".formatted-currency").formattedCurrency(),$(".formatted-date").formattedDate()}),function(t){t.fn.helpControl=function(e){var a=t.extend({helpText:""},e),n="";n+="<div class='help-control'>",n+="<div class='help-icon-container pull-left'><icon class='fa fa-question-circle'></icon></div>",n+="<div class='help-panel hide'>",n+="<span>$helpText$</span>".replace("$helpText$",a.helpText),n+="</div>",n+="</div>";this.append(n);var i=t(this).find(".help-icon-container")[0];t(i).attr("title","Show/Hide Help"),t(i).attr("data-toggle","tooltip");var l=parseFloat(t(this).css("height").replace("px",""));return t(i).css("top","-"+l+"px"),t(i).tooltip(),t(i).off("click").on("click",function(){var e=t(this.parentElement).find(".help-panel");null!=e&&(e.hasClass("hide")?t(e).removeClass("hide").addClass("show"):t(e).removeClass("show").addClass("hide"))}),this}}(jQuery),function(t){t.fn.inputPanel=function(e){t(this).addClass("input-panel");var a=!1,n=t.extend({label:"",koBinding:null,hasHelp:!1,helpText:"",inputType:"text",isDate:!1,defaultValue:null,useFormattedDD:!1,hasValidationMessage:!1,validationMessage:"Invalid input"},e),i=this.attr("data-bind");if(null!=i&&null==n.koBinding){var l=i.split(":"),o=(l[0].trim(),l[1].trim()),s=ko.contextFor(this[0]);n.koBinding=s.$data[o]}var d="";switch(d+="<div class='input-group'>",d+="<span class='input-group-addon'>$label$</span>".replace("$label$",n.label),n.inputType){case"text":case"date":d+="<input class='form-control input-field' type='$inputType$' />".replace("$inputType$",n.inputType);break;case"textarea":d+="<textarea class='form-control input-field' rows='6' type='text'></textarea>".replace("$inputType$",n.inputType);break;case"yesno":d+="<select class='input-field dd-yesno' id='$ddID$'>".replace("$ddID$",t(this)[0].id+"DD"),d+="<option value=true>Yes</option>",d+="<option value=false>No</option>",d+="</select>",a=!0}if(this.html(d),n.hasHelp&&this.helpControl({helpText:n.helpText}),a&&n.useFormattedDD){var r=t(this).find("select")[0],c=t(this).find(".input-panel")[0];t(c).addClass("has-formatted-dd"),t(r).formattedSelect({isBoolean:!0,koBoundObject:n.koBinding})}if(n.hasValidationMessage){this.validationMessage=this.WarningPanel({text:n.validationMessage,warningClass:"error"});var u=t(this).find(".warning-panel");t(u).addClass("validation-message"),u.hide()}var p=t(this).find(".input-field")[0];if(null!=n.koBinding){var f=!1;t(p).off("change").on("change",function(){f=!0,n.koBinding(this.value),f=!1}),n.koBinding.subscribe(function(){f||t(p).val(n.koBinding())})}switch(null!=n.defaultValue&&n.koBinding(n.defaultValue),n.hasHelp,n.inputType){case"date":t(p).datepicker({dateFormat:"dd/mm/yy"});break;case"text":n.isDate&&t(p).datepicker({dateFormat:"dd/mm/yy"})}var h=t(this).find(".formatted-select");return h.length>0&&t(h).addClass("is-input-panel"),this}}(jQuery),function(t){t.fn.listInput=function(e){var a=t.extend({name:"",helpText:"Please enter a value then click add",boundArray:null,isKO:!1,inputPanelLabel:"Input",addButtonText:"Add",removeButtonText:"Remove",listItemLabel:"New Item",useIndexer:!0,maxEntries:-1,clearInput:!1,autoAdd:!0},e),n=t(this).attr("id");t(this).html("<div class='boundlist-inner'><div class='boundlist-input'></div><div class='boundlist-items'></div></div>");var i=t(this).find(".boundlist-inner"),l=t(this).find(".boundlist-input"),o=t(l).inputPanel({hasHelp:!0,helpText:a.helpText,label:a.inputPanelLabel}),s=t(o).find(".input-group"),d="<div class='btn btn-default btn-list btn-list-add'>$text$</div>".replace("$text$",a.addButtonText);t(s).append(d);var r=t(i).find(".boundlist-items"),c=t(l).WarningPanel({text:"The maximum number of entries has been reached ("+a.maxEntries+")",warningClass:"error",additionalClass:"list-limit-error"}),u=t(c).find(".list-limit-error");function p(){if(t(r).html(""),null!=a.boundArray){(a.isKO?a.boundArray():a.boundArray).forEach(function(e,i){var l=n+"_listItem"+(parseInt(i)+1),o="<div class='boundlist-item-textbox' id='$itemID$'></div>".replace("$itemID$",l),s="<div class='btn btn-default btn-list btn-list-remove'>$text$</div>".replace("$text$",a.removeButtonText);t(r).append(o);var d=a.listItemLabel;a.useIndexer&&(d+="&nbsp;"+(parseInt(i)+1)),t("#"+l).textbox({labelText:d,tbText:e});var c=t("#"+l).find(".textbox");t(c).append(s)});var e=t(".textbox .btn-list");t(e).off("click").on("click",function(){var e=t(this).closest(".boundlist-inner").find(".list-limit-error");t(e).hide();var n=parseInt(t(this).closest(".boundlist-item-textbox").attr("id").replace("boundList_listItem",""))-1;a.boundArray.splice(n,1),p()})}}function f(e,n){var i=a.isKO?a.boundArray().length:a.boundArray.length,l=t(n).closest(".boundlist-input").find(".list-limit-error"),o=t(n).closest(".boundlist-input").find("input");a.maxEntries>0&&i==a.maxEntries?t(l).show():(a.boundArray.push(e),p(),a.clearInput&&t(o).val(""),t(o).focus())}t(u).hide(),p(),this.refreshList=function(){p()};var h=t(s).find(".btn-list");t(h).off("click").on("click",function(){var e=t(this).closest(".boundlist-input").find(".input-field");f(t(e).val(),this)});var v=t(l).find("input");return t(v).off("keydown").on("keydown",function(e){if(a.autoAdd){var n=t(v).val();13!=e.which&&9!=e.which||""==n||f(n,this)}}),a.isKO&&a.boundArray.subscribe(function(){p()}),this}}(jQuery),function(t){t.fn.ExtendedMap=function(e){var a,n,i,l,o=t.extend({areaclick:null,onrendered:null,onresize:null,hidetitles:!0,defaultzoom:1,controlpanelOffset:70},e),s=this,d=t(s).attr("id"),r=t(s).find("map"),c=t(s).find("img"),u=t(s).closest(".map-container"),p=c[0].width,f=c[0].height,h=o.defaultzoom,v=o.controlpanelOffset;function b(){var e=h.toFixed(2);t(i).find(".current-zoom-text").text(e)}return s.initMap=function(){var e="<div class='map-control-panel'>";e+="<div class='ctrl-btn ctrl-in'><span>+</span></div>",e+="<div class='ctrl-btn ctrl-out'><span>-</span></div>",e+="<div class='current-zoom-text'>$currentzoom$</div>".replace("$currentzoom$",h),e+="</div>",t(s).prepend(e),i=t(s).find(".map-control-panel");var c="<svg class='map-svg' id='$id$'>$polygons$</svg>".replace("$id$",d+"_svg"),u=t(r).find("area"),p="",f=0;t(u).each(function(e,a){var n=t(a).attr("shape"),i=t(a).attr("coords"),l="",o=t(a).attr("title"),s=t(a).attr("href"),r=t(a).attr("params");switch(t(a).attr("id",d+"_area_shape"+f),n){case"poly":l=(l='<polygon id="$id$" class="shape" areashape="$areashape$" points="$points$" href="$href$" params=$params$><title>$title$</title></polygon>').replace("$points$",i);break;case"rect":var c=i.split(","),u=parseFloat(c[0]),h=parseFloat(c[1]),v=parseFloat(c[2])-u,b=parseFloat(c[3])-h;l='<rect id="$id$" class="shape" areashape="$areashape$" x="$x$" y="$y$" width="$w$" height="$h$" href="$href$" params=$params$><title>$title$</title></rect>'.replace("$x$",u).replace("$y$",h).replace("$w$",v).replace("$h$",b);break;case"circle":c=i.split(","),u=parseFloat(c[0]),h=parseFloat(c[1]);var m=parseFloat(c[2]);l='<circle id="$id$" class="shape" areashape="$areashape$" cx="$x$" cy="$y$" r="$r$" href="$href$" params=$params$><title>$title$</title></circle>'.replace("$x$",u).replace("$y$",h).replace("$r$",m)}l=l.replace("$title$",o).replace("$href$",s).replace("$areashape$",n).replace("$params$"," '"+r+"'").replace("$id$",d+"_svg_shape"+f),p+=l,f++}),c=c.replace("$polygons$",p),t(s).append(c),n=t(s).find("svg"),l=t(n).find(".shape"),t(s).append("<div class='area-info-overlay'></div>"),a=t(s).find(".area-info-overlay"),t(l).each(function(e,n){var i,l,o="<div class='area-info-panel' id='$id$' style='margin-left: $left$; margin-top: $top$' params=$params$>";o+=t(n).find("title").text(),o+="</div>";var s=t(n).attr("areashape"),d=t(n).attr("params"),r=t(n).attr("id");switch(s){case"rect":i=t(n).attr("x"),l=t(n).attr("y");break;case"poly":var c=GetPolyProps(t(n).attr("points"));i=c.x,l=c.y}o=o.replace("$left$",i+"px").replace("$top$",l+"px").replace("$id$",r+"_info_panel").replace("$params$",d),t(a).append(o)}),o.hidetitles&&t(a).addClass("hidden"),t(l).on("click",function(){if(null!==o.areaclick)o.areaclick(this);else{var e=t(this).attr("href");"undefined"!==e&&(window.location.href=e)}}),t(i).find(".ctrl-in").on("click",function(){h+=.05,s.resizeImage(),s.resizeSVG(),s.resizePanels(),b()}),t(i).find(".ctrl-out").on("click",function(){h-=.05,s.resizeImage(),s.resizeSVG(),s.resizePanels(),b()})},s.resizeImage=function(){var e=t(".map-container").find("img");t(e).css("zoom",h),t(e).css({"-moz-transform":"scale("+h+")","-moz-transform-origin":"left top",position:"absolute",top:"-5",left:"1"})},s.resizeSVG=function(){t(l).each(function(e,a){var n=t(a).attr("areashape"),i=t(a).attr("id"),l=i.replace("_svg_shape","_area_shape"),o=t("#"+l),d=t(o).attr("coords"),r=t("#"+i+"_info_panel");switch(n){case"rect":var c=d.split(","),u=parseFloat(c[2])-parseFloat(c[0]),p=parseFloat(c[3])-parseFloat(c[1]),f=parseFloat(c[0])*h,v=parseFloat(c[1])*h,b=u*h,m=p*h;t(a).attr("x",f),t(a).attr("y",v),t(a).attr("width",b),t(a).attr("height",m),t(r).css("margin-left",f+"px"),t(r).css("margin-top",v+"px");break;case"poly":var g=s.zoomedPolyPoints(d,h);t(a).attr("points",g);var x=GetPolyProps(t(a).attr("points")),$=x.x,C=x.y;t(r).css("margin-left",$+"px"),t(r).css("margin-top",C+"px")}})},s.zoomedPolyPoints=function(t,e){for(var a=t.split(","),n="",i=0;i<a.length;i++){var l=parseFloat(a[i])*e,o=parseFloat(a[i+1])*e;n+=l.toString()+","+o.toString(),i!=a.length-2&&(n+=","),i++}return n},s.resizePanels=function(){t(s).width(p*h),t(s).height(f*h),t(n).width(p*h),t(n).height(f*h),t(a).width(p*h),t(a).height(f*h)},s.zoomToFit=function(){u=t(s).closest(".map-container");var e=t(u).width(),a=t(u).height(),i=t(u).css("margin-left"),l=(t(u).css("margin-top"),e/p),d=a/f;h=l<d?l:d,b();var r=t(".map-container").find("img,svg");t(r).css("zoom",h),s.resizeSVG(),s.resizePanels();var v=parseFloat(i.replace("px",""))*h;t(c).css("margin-left",i),t(n).css("margin-left",i),console.log(s),console.log(n),console.log(v),null!==o.onresize&&o.onresize(e,a)},s.updateControlPanelPos=function(e){var a=0===e?v:e;t(i).css("margin-top",a+"px")},t(window).on("resize",function(){s.zoomToFit()}),t(window).on("scroll",function(){s.updateControlPanelPos(this.pageYOffset)}),s.resizeImage(),s.initMap(),s.resizePanels(),s.updateControlPanelPos(0),b(),null!==o.onrendered&&o.onrendered(),s}}(jQuery),function(t){t.fn.ModalHelp=function(e){var a=this,n=t.extend({title:"",helptext:"",name:"helpModal",embedURL:""},e),i=null!=n.embedURL&&""!=n.embedURL,l="";l+="<div class='ec-help-modal hidden' id='helpModal_$name$' tabindex='-1'>".replace("$name$",n.name),l+="<div class='modal-dialog' role='document'>",l+="<div class='modal-content'>",l+="<div class='modal-header'>",l+="<button type='button' class='close' title='Close'><span aria-hidden='true'>&times;</span></button>",l+="<icon class='fa fa-question fa'></icon>",l+="<h4 class='modal-title' id='myModalLabel'>$title$</h4>".replace("$title$",n.title),l+="</div>",l+="<div class='modal-body'>",i||(l+="<div  class='help-text'><h4>$helptext$</h4></div>".replace("$helptext$",n.helptext)),l+="</div>",l+="</div>",l+="</div>",l+="</div>",t(a).append(l);var o,s=t(a).find("#helpModal_"+n.name),d=t(s).find(".modal-content"),r=t(s).find(".modal-body"),c=t(s).find(".modal-dialog"),u=t(s).find(".modal-title"),p=t(s).find(".close");if(i){var f="<iframe src='$embedURL$' />".replace("$embedURL$",n.embedURL);t(r).append(f),t(s).addClass("embeded-page"),o=t(r).find("iframe")}t(d).resizable(),t(c).draggable();var h=!1,v=t(s).find(".ui-resizable-handle");return t(v).on("mousedown",function(){h=!0}),t(v).on("mouseup",function(){h=!1}),t(v).on("mousemove",function(){if(h){var e=t(d).height()-32;t(r).css("height",e)}}),a.show=function(){t(s).removeClass("hidden"),t(s).addClass("shown")},a.hide=function(){t(s).removeClass("shown"),t(s).addClass("hidden")},a.loadPage=function(e){t(o).attr("src",e)},a.setHTML=function(e){t(r).empty(),t(r).prepend(e)},a.setTitle=function(e){t(u).text(e)},t(p).on("click",function(){a.hide()}),a}}(jQuery),function(t){t.fn.ModalInput=function(e){var a=this,n=t.extend({modalText:"Title",password:!1,button1Click:null,button2Click:null},e);a.returnValue="",a.modalText=n.modalText;var i=n.password?"password":"text",l="";l+="<div class='ec-input-modal modal'>",l+="<div class='ec-modal-text'>$modalText$</div>".replace("$modalText$",a.modalText),l+="<div class='input-container'>",l+="<input class='ec-input-modal-input' type='$inputtype$' />".replace("$inputtype$",i),l+="</div>",l+="<div class='ec-input-buttons'>",l+="<div class='btn btn-default btn1'>Ok</div>",l+="<div class='btn btn-default btn2'>Cancel</div>",l+="</div>",l+="</div>",a.html(l);var o=t(a).find(".ec-input-modal");a.showModal=function(){var e=t(a).find(".ec-modal-text")[0];t(e).text(a.modalText),t(o).modal("show")},a.hideModal=function(){t(o).modal("hide")};var s=t(a).find(".btn1")[0],d=t(a).find(".btn2")[0];return t(s).on("click",function(){var t=a.find("input[type=text]");a.returnValue=t.val(),a.hideModal(),null!=n.button1Click&&n.button1Click(a.returnValue)}),t(d).on("click",function(){a.hideModal(),null!=n.button2Click&&n.button2Click(a.returnValue)}),a}}(jQuery),function(t){t.fn.ModalPanel=function(e){var a=this,n=t.extend({title:"",panelHTML:"",name:"modalPanel",embedURL:"",button1Text:"Ok",button2Text:"Cancel",button1Click:null,button2Click:null,fixedsize:!1,fixedpos:!1,width:300,height:300},e),i=null!=n.embedURL&&""!=n.embedURL,l="";l+="<div class='ec-modal-panel hidden' id='modalPanel_$name$' tabindex='-1'>".replace("$name$",n.name),l+="<div class='modal-dialog' role='document'>",l+="<div class='modal-content'>",l+="<div class='modal-header'>",l+="<button type='button' class='close' title='Close'><span aria-hidden='true'>&times;</span></button>",l+="<icon class='fa fa-question fa'></icon>",l+="<h4 class='modal-title' id='myModalLabel'>$title$</h4>".replace("$title$",n.title),l+="</div>",l+="<div class='modal-body'>",i||(l+="<div  class='modal-text'><h4>$panelHTML$</h4></div>".replace("$panelHTML$",n.panelHTML)),l+="<div class='modal-footer'>",l+="<div class='ec-input-buttons'>",l+="<div class='btn modal-btn modal-btn-1'>$button1Text$</div>".replace("$button1Text$",n.button1Text),l+="<div class='btn modal-btn modal-btn-2'>$button2Text$</div>".replace("$button2Text$",n.button2Text),l+="</div>",l+="</div>",l+="</div>",l+="</div>",l+="</div>",l+="</div>",t(a).append(l);var o,s=t(a).find("#modalPanel_"+n.name),d=t(s).find(".modal-content"),r=t(s).find(".modal-body"),c=t(s).find(".modal-text"),u=t(s).find(".modal-dialog"),p=t(s).find(".modal-title"),f=t(s).find(".modal-btn-1"),h=t(s).find(".modal-btn-2"),v=t(s).find(".close");if(i){var b="<iframe src='$embedURL$' />".replace("$embedURL$",n.embedURL);t(r).append(b),t(s).addClass("embeded-page"),o=t(r).find("iframe")}a.resizemodal=function(){var e=t(d).height(),a=t(d).width(),n=e-32,i=e-120;t(r).css("height",n),t(u).width(a),t(u).height(e),t(c).height(i)},n.fixedsize?(t(d).width(n.width),t(d).height(n.height),a.resizemodal()):t(d).resizable(),n.fixedpos||t(u).draggable();var m=!1,g=t(s).find(".ui-resizable-handle");return t(g).on("mousedown",function(){m=!0}),t(g).on("mouseup",function(){m=!1}),t(g).on("mousemove",function(){m&&a.resizemodal()}),a.show=function(){t(s).removeClass("hidden"),t(s).addClass("shown")},a.hide=function(){t(s).removeClass("shown"),t(s).addClass("hidden")},a.loadPage=function(e){t(o).attr("src",e)},a.setHTML=function(e){t(r).empty(),t(r).prepend(e)},a.setTitle=function(e){t(p).text(e)},t(f).on("click",function(){a.hide(),null!=n.button1Click&&n.button1Click()}),t(h).on("click",function(){a.hide(),null!=n.button2Click&&n.button2Click()}),t(v).on("click",function(){a.hide()}),a}}(jQuery),function(t){t.fn.ModalRequestor=function(e){var a=t.extend({title:"Modal",name:"modalRequestor",modalBodyText:"Requestor modal",button1Text:"Ok",button2Text:"Cancel",modalType:"twobutton",additionalCSSClass:"",useIcon:!1,iconClass:"fa-info-circle fa-3x",buttonAlignment:"right",onButton1Click:null,onButton2Click:null},e),n="";n+="<div class='modal modal-requestor-container $additionalCSSClass$' id=$modalID$>".replace("$additionalCSSClass$",a.addtionalCSSClass).replace("$modalID$",a.name),n+="<div class='modal-title'>$title$</div>".replace("$title$",a.title),n+="<div class='modal-body'></div>",n+="<div class='modal-buttons'></div>",n+="</div>",t(this).append(n);var i=t(this).find("#"+a.name),l=t(i).find(".modal-body"),o="";o+="<div class='modal-icon-container'><i class='fa'></i></div>",o+="<div class='modal-body-text'>$modalBodyText$</div>".replace("$modalBodyText$",a.modalBodyText),t(l).append(o),a.useIcon&&(t(l).find(".modal-icon-container").addClass("col-sm-3"),t(l).find(".modal-icon-container > i").addClass(a.iconClass),t(l).find(".modal-body-text").addClass("col-sm-9"),t(l).addClass("has-icon"));var s=t(i).find(".modal-buttons"),d="";switch(d+="<div class='modal-buttons-container'>",d+="<div class='btn btn-default modal-btn modal-btn-1'>$button1Text$</div>".replace("$button1Text$",a.button1Text),d+="<div class='btn btn-default modal-btn modal-btn-2'>$button2Text$</div>".replace("$button2Text$",a.button2Text),d+="</div>",t(s).append(d),t(s).addClass(a.buttonAlignment),a.modalType){case"alert":t(s).find(".modal-btn-2").addClass("hide")}return t(s).find(".modal-btn-1").off("click").on("click",function(){t(i).modal("hide"),null!=a.onButton1Click&&a.onButton1Click()}),t(s).find(".modal-btn-2").off("click").on("click",function(){t(i).modal("hide"),null!=a.onButton2Click&&a.onButton2Click()}),this.show=function(){t(i).modal("show")},this}}(jQuery),function(t){t.fn.PageHeader=function(e){this.appTitle="",this.pageTitle="",this.noMediaIcons=!1;var a=t(this).attr("pagetitle"),n=t(this).attr("apptitle"),i=t(this).attr("nomediaicons"),l=t(this).attr("homeurl");this.appTitle=n,this.pageTitle=a,this.noMediaIcons=i;t.extend({},e);this.html("<div class='row'><div class='header-row col-sm-12'><div class='row'><div class='logo-container col-sm-2'><div class='logo-main'></div></div><div class='title-container col-sm-8'><div class='header-content'><div class='header-app-title'></div><div class='header-page-title'></div></div></div><div class='social-media-container col-sm-2'><div class='header-content'><div class='social-media-element'></div></div></div></div></div></div>");var o=t(this).find(".header-page-title");t(o).text(this.pageTitle);var s=t(this).find(".header-app-title");t(s).text(this.appTitle);var d=t(this).find(".social-media-container");this.noMediaIcons?t(d).hide():t(d).ASSocialMedia();var r=t(this).find(".logo-main");return null!=l&&t(r).addClass("has-link"),t(r).on("click",function(){null!=l&&(window.location.href=l)}),this}}(jQuery),function(t){t.fn.buttonGroup=function(e){var a=this;a.addClass("button-group"),a.disabled=!1;var n=t.extend({isBool:!1,bindings:{viewModel:null,value:null}},e);return a.viewModel=t(a).attr("viewModel")?t(a).attr("viewModel"):n.bindings.viewModel,a.boundValue=t(a).attr("boundValue")?t(a).attr("boundValue"):n.bindings.value,a.isBool=t(a).attr("isBool")?t(a).attr("isBool"):n.isBool,null!==a.viewModel&&null!==a.boundValue?a.boundValueObject=window[a.viewModel][a.boundValue]:a.boundValueObject=null,a.updateBoundValue=function(t){var e=typeof a.boundValueObject();(a.isBool||"boolean"==e)&&a.boundValueObject("true"==t.toLowerCase())},a.buttons=[],a.setActiveButton=function(t){a.buttons[t].SetAsActive()},a},t.fn.selectionButton=function(e){var a=this;a.addClass("selection-button"),a.eventHandlers={},a.Events={NewEventHandler:function(t,e){null!=a.eventHandlers[t]||(a.eventHandlers[t]=[]),a.eventHandlers[t].push(e)}},a.event=function(t,e){null!=a.eventHandlers&&(a.disabled||null!=a.eventHandlers[t]&&a.eventHandlers[t].length>0&&a.eventHandlers[t].forEach(function(t,a){null!=e?t(e):t()}))};var n=t.extend({btntitle:"",icon:"",value:null,text:"",attachedControl:null,buttonGroup:null,bindings:{title:null,icon:null,value:null,text:null}},e);null!=n.attachedControl&&(a.attachedControl=n.attachedControl,t(a.attachedControl).hide()),null!=n.bindings.title?n.bindings.title.subscribe(function(){a.btntitle(n.bindings.title()),a.updateTitle()}):a.btntitle=t(a).attr("btntitle")?t(a).attr("btntitle"):n.btntitle,null!=n.bindings.icon?(a.icon=n.bindings.icon(),n.bindings.icon.subscribe(function(){a.icon=n.bindings.icon(),a.updateIcon()})):a.icon=t(a).attr("icon")?t(a).attr("icon"):n.icon,null!=n.bindings.value?(a.value=n.bindings.value(),n.bindings.value.subscribe(function(){a.value=n.bindings.value(),a.updateText()})):a.value=t(a).attr("value")?t(a).attr("value"):n.value,null!=n.bindings.text?(a.text=n.bindings.text(),n.bindings.text.subscribe(function(){a.text=n.bindings.text(),a.updateText()})):a.text=t(a).attr("text")?t(a).attr("text"):n.text;var i="";return i+="<div class='selection-button-outer'>",i+="<div class='button-title'>$btntitle$</div>".replace("$btntitle$",a.btntitle),i+="<div class='button-icon'><icon class='$icon$'></icon></div>".replace("$icon$",a.icon),i+="<div class='button-text'>$text$</div>".replace("$text$",a.text),i+="</div>",a.html(i),a.updateTitle=function(){t(a).find(".button-title").text(a.btntitle)},a.updateIcon=function(){t(a).find(".button-icon").find("icon").attr("class",a.icon)},a.updateText=function(){t(a).find(".button-text").text(a.text)},t(a).off("click").on("click",function(){a.SetAsActive(),a.updateGroupBoundValue(),a.event("click",a)}),null!=n.buttonGroup&&n.buttonGroup.buttons.push(a),a.updateGroupBoundValue=function(){null!=n.buttonGroup.boundValueObject&&n.buttonGroup.updateBoundValue(a.value)},a.SetAsActive=function(){null!=n.buttonGroup&&n.buttonGroup.buttons.forEach(function(e,a){t(e).removeClass("active"),t(e.attachedControl).hide()}),null!=n.attachedControl&&(t(n.attachedControl).show(),t(n.attachedControl).find("input").focus(),t(n.attachedControl).find("input").select()),t(a).addClass("active")},a.setInvalidInput=function(){t(a).find(".selection-button-outer").addClass("invalid-input")},a.setDisabled=function(e){a.disabled=e,a.disabled?t(a).addClass("disabled"):t(a).removeClass("disabled")},a}}(jQuery),function(t){t.fn.showHideButton=function(e){var a=this,n=t(a).attr("target"),i=t(a).attr("targetVisible");e=t.extend({target:null,targetVisible:!1,text:""},e);a.target=n||e.target,a.targetVisiblle=i||e.targetVisible,a.text=t(a).text()||e.text;var l="";l+="<div class='btn btn-default btn-show-hide'>",l+=a.text,l+="</div>",a.html(l),a.targetVisible||null==a.target||t("#"+a.target).hide();var o=t(a).find(".btn-show-hide");return t(o).on("click",function(){a.targetVisible=!a.targetVisible,a.targetVisible?t("#"+a.target).show(500):t("#"+a.target).hide(500)}),a}}(jQuery),function(t){t.fn.SocialMediaIcons=function(e){var a="",n=t.extend({liURL:"",fbURL:"",twURL:"",gpURL:""},e);return a+="",a+="<a class='social-media-standalone hide-title' href='$liURL$'>".replace("$liURL$",n.liURL),a+="<span class='icon fa fa-linkedin'></span>",a+="<span class='title'>linkedin</span>",a+="</a>",a+="<a class='social-media-standalone hide-title' href='$fbURL$'>".replace("$fbURL$",n.fbURL),a+="<span class='icon fa fa-facebook'></span>",a+="<span class='title'>facebook</span>",a+="</a>",a+="<a class='social-media-standalone hide-title' href='$twURL$'>".replace("$twURL$",n.twURL),a+="<span class='icon fa fa-twitter'></span>",a+="<span class='title'>twitter</span>",a+="</a>",a+="<a class='social-media-standalone hide-title' href='$gpURL$'>".replace("$gpURL$",n.gpURL),a+="<span class='icon fa fa-google-plus'></span>",a+="<span class='title'>googleplus</span>",a+="</a>",this.html(a),this}}(jQuery),function(t){t.fn.textbox=function(e){var a=t.extend({labelText:"",tbText:"",textkoBinding:null,labelkoBinding:null,noLabel:!1,id:""},e);null!=a.labelkoBinding&&(a.labelText=a.labelkoBinding()),null!=a.textkoBinding&&(a.tbText=a.textkoBinding());var n="";n+="<div class='textbox' id='$id$'>".replace("$id$",a.id),n+="<div class='textbox-label'><label>$labelText$</label></div>".replace("$labelText$",a.labelText),n+="<label class='textbox-text'><label>$tbText$</label></v>".replace("$tbText$",a.tbText),n+="</div>",this.html(n);var i=t(this[0]).find(".textbox"),l=t(i).find(".textbox-label")[0],o=t(i).find(".textbox-text")[0];return this.setText=function(e){var a=t(i).find(".textbox-text")[0];t(a).text(e)},a.noLabel&&t(i).addClass("no-label"),null!=a.labelkoBinding&&a.labelkoBinding.subscribe(function(){t(l).find("label").text(a.labelkoBinding().toString())}),null!=a.textkoBinding&&a.textkoBinding.subscribe(function(){t(o).find("label").text(a.textkoBinding().toString())}),this}}(jQuery);var validatedControls=[],groupValidators=[],groupIndex=0;function allInputsValid(t){var e=!0;return null==t&&(t=validatedControls),t.forEach(function(t){0==t.CheckValid()&&(e=!1)}),e}!function(t){t.fn.groupValidator=function(e){var a=this,n=t.extend({boundKOValidationResult:null},e);return groupValidators[groupIndex]=a,groupValidators[groupIndex].attachedControls=[],a.groupIndex=groupIndex,a.isValid=!0,a.UpdateValidation=function(){a.attachedControls.length>0&&(a.isValid=!0,a.attachedControls.forEach(function(t,e){0==t.CheckValid()&&(a.isValid=!1)}),null!=n.boundKOValidationResult&&n.boundKOValidationResult(a.isValid))},groupIndex++,a},t.fn.inputValidator=function(e){var a=this;a.wrap("<div class='validated-input'></div>"),a.outerControl=a.closest(".validated-input"),a.validationMessageControl=null;var n=a.find("input");0==n.length&&(n=a.find("textarea")),0==n.length&&(n=a);var i=t.extend({validationFunction:null,validationMessage:"Invalid Input",useValidationMessage:!1,realTimeValidation:!1,highlightValid:!0,boundKOValue:null,boundKOValidationResult:null,groupValidator:null,allowBlank:!0},e);if(a.append("<div class='validation-message-container'></div>"),a.allowBlank=i.allowBlank,i.realTimeValidation&&t(n).on("keyup",function(){a.CheckValid(),null!=i.groupValidator&&i.groupValidator.UpdateValidation()}),i.useValidationMessage){var l=t(this).find(".validation-message-container");t(l).WarningPanel({text:i.validationMessage,warningClass:"error",additionalClass:"validation-message"})}return a.CheckValid=function(){var e=function(e,a,n){var i=e.find("input"),l=e.find(".validation-message");0==i.length&&(i=e.find("textarea")),0==i.length&&(i=e);var o=t(i).val();return e.validInput=a(o),t(l).hide(),e.allowBlank||""!=o?(e.validInput||""==o?""!=o?(i.removeClass("invalid-input"),t(l).hide(),n&&i.addClass("valid-input")):(i.removeClass("invalid-input").removeClass("valid-input"),t(l).hide()):(i.addClass("invalid-input").removeClass("valid-input"),t(l).show()),e.validInput):(i.addClass("invalid-input").removeClass("valid-input"),t(l).show(),!1)}(a,i.validationFunction,i.highlightValid);return null!=i.boundKOValue&&i.boundKOValue(t(a).val()),null!=i.boundKOValidationResult&&i.boundKOValidationResult(e),null!=a.validationMessageControl&&(t(a.validationMessageControl).hide(),e||t(a.validationMessageControl).show()),e},validatedControls.push(a),null!=i.groupValidator&&i.groupValidator.attachedControls.push(a),a},t.fn.numericValidator=function(e){this.validInput=!1;var a=t.extend({validationMessage:"Input is not a number",useValidationMessage:!1,highlightValid:!1,realTimeValidation:!1,boundKOValue:null,boundKOValidationResult:null,groupValidator:null,allowBlank:!0},e),n=t(this).inputValidator({validationMessage:a.validationMessage,useValidationMessage:a.useValidationMessage,highlightValid:a.highlightValid,realTimeValidation:a.realTimeValidation,validationFunction:function(t){return new RegExp("^[0-9]*$").test(t)},boundKOValue:a.boundKOValue,boundKOValidationResult:a.boundKOValidationResult,groupValidator:a.groupValidator,allowBlank:a.allowBlank});return this.validInput=function(){n.CheckValid()},this.CheckValid=function(){return n.CheckValid()},this},t.fn.alphaValidator=function(e){this.validInput=!1;var a=t.extend({validationMessage:"Please enter only numbers or letters",useValidationMessage:!1,highlightValid:!1,realTimeValidation:!1,boundKOValue:null,boundKOValidationResult:null,groupValidator:null,allowBlank:!0},e),n=t(this).inputValidator({validationMessage:a.validationMessage,useValidationMessage:a.useValidationMessage,highlightValid:a.highlightValid,realTimeValidation:a.realTimeValidation,validationFunction:function(t){return new RegExp("^[a-zA-Z0-9_]*$").test(t)},boundKOValue:a.boundKOValue,boundKOValidationResult:a.boundKOValidationResult,groupValidator:a.groupValidator,allowBlank:a.allowBlank});return this.validInput=function(){n.CheckValid()},this.CheckValid=function(){return n.CheckValid()},this}}(jQuery),function(t){t.fn.valueDisplay=function(e){this.addClass("icon-panel");var a=t.extend({labelText:"",iconClass:"",valueBinding:null,visibleBinding:null},e),n="";return n+="<div class='icon-container false fa-stack'>",n=(n=(n+="</div>").replace("$labelText$",a.labelText)).replace("$iconClass$",a.iconClass),this.html(n),this}}(jQuery),function(t){t.fn.WarningPanel=function(e){var a=t.extend({text:"Warning Panel",warningClass:"",additionalClass:""},e),n="";n+="<div class='warning-panel'>",n+="<div class='warning-text'>$text$</div>".replace("$text$",a.text),n+="</div>",t(this).append(n);var i=t(this).find(".warning-panel")[0];return t(i).addClass(a.warningClass),t(i).addClass(a.additionalClass),this}}(jQuery),$(document).ready(function(){!!document.documentMode&&$(".grouped-buttons").addClass("ie-fix")});